# Staging Environment Configuration Template
# Copy this file to .env.staging and update with actual values
# IMPORTANT: Never commit .env.staging to version control

# =============================================================================
# Database Configuration
# =============================================================================
# PostgreSQL connection string for staging database
# Format: postgresql://user:password@host:port/database?sslmode=MODE
# Required extensions: postgis, pgvector, pg_trgm
# 
# STAGING DIFFERENCES FROM DEVELOPMENT:
# - Uses staging-db hostname (Docker Compose service name)
# - Database name: togather_staging (isolated from dev/prod)
# - Should connect to a separate staging database instance
# - ⚠️  MUST use sslmode=require or sslmode=verify-full (NOT disable)
# 
# ⚠️  REQUIRED: Change CHANGE_ME to your actual staging password
# The POSTGRES_PASSWORD must be set and match your staging database credentials.
#
# SSL Mode Requirements:
# - Staging MUST use sslmode=require (minimum) or sslmode=verify-full (recommended)
# - Never use sslmode=disable in staging/production environments
# - For verify-full, also set DATABASE_SSL_ROOT_CERT path below
DATABASE_URL=postgresql://togather:CHANGE_ME@staging-db:5432/togather_staging?sslmode=require

# =============================================================================
# Authentication & Security
# =============================================================================
# JWT secret key for signing authentication tokens
# SECURITY: Must use a different secret than development or production
# Generate a strong random value: openssl rand -base64 32
# 
# STAGING DIFFERENCES FROM DEVELOPMENT:
# - Must be different from development secrets to prevent token replay
# - Should be production-strength but distinct from production
# - Rotate regularly as part of staging refresh cycles
JWT_SECRET=CHANGE_ME_staging_secret

# =============================================================================
# Application Configuration
# =============================================================================
# Logging verbosity level
# Options: debug, info, warn, error
# 
# STAGING DIFFERENCES FROM DEVELOPMENT:
# - Uses "info" instead of "debug" to match production behavior
# - Helps catch issues that only appear with production log levels
# - Reduces log volume while maintaining visibility
LOG_LEVEL=info

# Deployment environment identifier
# Options: development, staging, production
# 
# STAGING DIFFERENCES FROM DEVELOPMENT:
# - Set to "staging" to enable staging-specific behavior
# - Affects error reporting, performance optimizations, and feature flags
# - May enable production-like rate limiting and validation
ENVIRONMENT=staging

# =============================================================================
# Server Configuration
# =============================================================================
# ⚠️  CHANGE_ME: Set to your staging domain (HTTPS required)
# Used in invitation links, API responses, and webfiles
SERVER_BASE_URL=https://staging.example.com

# =============================================================================
# Email Configuration
# =============================================================================
# Choose between SMTP or Resend API for sending emails
# See docs/admin/email-setup.md for full configuration guide
#
# STAGING DIFFERENCES FROM DEVELOPMENT:
# - Should use the same provider as production to catch integration issues
# - Use a separate sending domain or API key from production
# - EMAIL_FROM domain must be verified with your email provider
#
# Provider options: "smtp" or "resend" (default: "smtp")
EMAIL_ENABLED=true
EMAIL_PROVIDER=resend
EMAIL_FROM=noreply@your-domain.com
RESEND_API_KEY=CHANGE_ME_resend_api_key
# SMTP fallback (only needed if EMAIL_PROVIDER=smtp):
# SMTP_HOST=smtp.gmail.com
# SMTP_PORT=587
# SMTP_USER=your-email@gmail.com
# SMTP_PASSWORD=your-gmail-app-password
EMAIL_TEMPLATES_DIR=web/email/templates

# =============================================================================
# Additional Notes
# =============================================================================
# See specs/001-deployment-infrastructure/spec.md FR-017 for details on:
# - Secrets management best practices
# - Migration to cloud secret managers (Phase 3)
# - Security considerations for different environments
#
# STAGING ENVIRONMENT PURPOSE:
# - Pre-production testing with production-like configuration
# - Integration testing with external services
# - Performance and load testing
# - Security validation before production deployment
# - User acceptance testing (UAT)
#
# STAGING DEPLOYMENT NOTES:
# 1. Copy this file: cp .env.staging.example .env.staging
# 2. Generate NEW secure values (do not reuse dev/prod secrets):
#    - JWT_SECRET: openssl rand -base64 32
# 3. Update DATABASE_URL with staging database credentials
# 4. Ensure .env.staging is in .gitignore (already configured)
# 5. Store actual secrets in cloud secret manager (Phase 3)
#
# SECURITY CONSIDERATIONS:
# - Staging should use production-strength secrets
# - Never use production secrets in staging
# - Rotate staging secrets regularly (e.g., monthly)
# - Staging data should be synthetic or anonymized
# - Staging environment should be network-isolated from production
#
# DIFFERENCES FROM DEVELOPMENT:
# - LOG_LEVEL=info (not debug) to match production
# - ENVIRONMENT=staging for staging-specific behavior
# - Database hostname points to staging-db service
# - All secrets must be distinct from development
# - More restrictive configuration to catch prod issues early
