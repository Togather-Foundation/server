# Staging Environment Configuration Template
# Copy this file to .env.staging and update with actual values
# IMPORTANT: Never commit .env.staging to version control

# =============================================================================
# Database Configuration
# =============================================================================
# PostgreSQL connection string for staging database
# Format: postgresql://user:password@host:port/database
# Required extensions: postgis, pgvector, pg_trgm
# 
# STAGING DIFFERENCES FROM DEVELOPMENT:
# - Uses staging-db hostname (Docker Compose service name)
# - Database name: togather_staging (isolated from dev/prod)
# - Should connect to a separate staging database instance
# 
# Change CHANGE_ME to your actual staging password
DATABASE_URL=postgresql://togather:CHANGE_ME@staging-db:5432/togather_staging

# =============================================================================
# Authentication & Security
# =============================================================================
# JWT secret key for signing authentication tokens
# SECURITY: Must use a different secret than development or production
# Generate a strong random value: openssl rand -base64 32
# 
# STAGING DIFFERENCES FROM DEVELOPMENT:
# - Must be different from development secrets to prevent token replay
# - Should be production-strength but distinct from production
# - Rotate regularly as part of staging refresh cycles
JWT_SECRET=CHANGE_ME_staging_secret

# Admin API key for administrative operations
# SECURITY: Must use a different key than development or production
# Generate a strong random value: openssl rand -hex 32
# 
# STAGING DIFFERENCES FROM DEVELOPMENT:
# - Separate key ensures staging access doesn't grant dev/prod access
# - Used for testing admin workflows in production-like environment
ADMIN_API_KEY=CHANGE_ME_staging_api_key

# =============================================================================
# Application Configuration
# =============================================================================
# Logging verbosity level
# Options: debug, info, warn, error
# 
# STAGING DIFFERENCES FROM DEVELOPMENT:
# - Uses "info" instead of "debug" to match production behavior
# - Helps catch issues that only appear with production log levels
# - Reduces log volume while maintaining visibility
LOG_LEVEL=info

# Deployment environment identifier
# Options: development, staging, production
# 
# STAGING DIFFERENCES FROM DEVELOPMENT:
# - Set to "staging" to enable staging-specific behavior
# - Affects error reporting, performance optimizations, and feature flags
# - May enable production-like rate limiting and validation
ENVIRONMENT=staging

# =============================================================================
# Additional Notes
# =============================================================================
# See specs/001-deployment-infrastructure/spec.md FR-017 for details on:
# - Secrets management best practices
# - Migration to cloud secret managers (Phase 3)
# - Security considerations for different environments
#
# STAGING ENVIRONMENT PURPOSE:
# - Pre-production testing with production-like configuration
# - Integration testing with external services
# - Performance and load testing
# - Security validation before production deployment
# - User acceptance testing (UAT)
#
# STAGING DEPLOYMENT NOTES:
# 1. Copy this file: cp .env.staging.example .env.staging
# 2. Generate NEW secure values (do not reuse dev/prod secrets):
#    - JWT_SECRET: openssl rand -base64 32
#    - ADMIN_API_KEY: openssl rand -hex 32
# 3. Update DATABASE_URL with staging database credentials
# 4. Ensure .env.staging is in .gitignore (already configured)
# 5. Store actual secrets in cloud secret manager (Phase 3)
#
# SECURITY CONSIDERATIONS:
# - Staging should use production-strength secrets
# - Never use production secrets in staging
# - Rotate staging secrets regularly (e.g., monthly)
# - Staging data should be synthetic or anonymized
# - Staging environment should be network-isolated from production
#
# DIFFERENCES FROM DEVELOPMENT:
# - LOG_LEVEL=info (not debug) to match production
# - ENVIRONMENT=staging for staging-specific behavior
# - Database hostname points to staging-db service
# - All secrets must be distinct from development
# - More restrictive configuration to catch prod issues early
